<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MD. MOSFIQUR RAHMAN — Portfolio (Premium UI)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ---------- THEME / BASE (kept from your original) ---------- */
:root{
  --bg: #0f1724;
  --card: rgba(255,255,255,0.04);
  --muted: #9aa6bd;
  --accent: #60a5fa;
  --accent-light: #93c5fd;
  --glass-2: rgba(255,255,255,0.03);
  --radius: 14px;
  --max-w: 1100px;
  --ui: 'Poppins', system-ui;
  --text: #ffffff;
}
[data-theme="light"]{
  --bg: #f7fafc;
  --card: #ffffff;
  --muted: #475569;
  --accent: #2563eb;
  --accent-light: #3b82f6;
  --glass-2: rgba(12,18,30,0.06);
  --text: #0f172a;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:var(--ui);background:var(--bg);color:var(--muted);line-height:1.55;overflow-x:hidden}
.app{max-width:var(--max-w);margin:28px auto;padding:20px;position:relative;z-index:10}
img{display:block;max-width:100%}
.accent{color:var(--accent);font-weight:700}

/* ---------- NAV & HERO (original) ---------- */
.site-header{position:fixed;left:50%;transform:translateX(-50%);top:16px;width:calc(100% - 40px);max-width:var(--max-w);display:flex;align-items:center;justify-content:space-between;padding:10px 18px;border-radius:var(--radius);background:linear-gradient(180deg, rgba(255,255,255,0.05), transparent);backdrop-filter:blur(10px);z-index:1000;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
.brand{font-weight:700;color:var(--accent);font-size:20px}
.nav{display:flex;gap:14px}
.nav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:600}
.nav a:hover{color:var(--accent)}
.actions{display:flex;gap:10px;align-items:center}
.icon-btn{background:transparent;border:0;padding:8px;border-radius:8px;cursor:pointer;font-size:18px;color:var(--muted);transition:.2s}
.icon-btn:hover{color:var(--accent)}

/* add: theme icon image inside the button */
.icon-btn.theme-icon img{
  width:18px;
  height:18px;
  display:block;
  object-fit:contain;
  /* subtle tint for light theme */
  transition:filter .18s ease;
}
[data-theme="light"] .icon-btn.theme-icon img{
  filter: invert(1) brightness(0.9);
}

.btn{border:0;padding:10px 16px;border-radius:12px;font-weight:600;cursor:pointer;background:var(--accent);color:white;text-decoration:none;transition:0.28s}
.btn:hover{background:var(--accent-light)}
.btn.ghost{
  background:rgba(147,197,253,0.08);
  border:1.6px solid rgba(147,197,253,0.6);
  color:var(--accent-light);
  box-shadow:0 0 0 1px rgba(147,197,253,0.18);
}
.btn.ghost:hover{
  background:rgba(147,197,253,0.18);
  border-color:var(--accent-light);
  color:var(--accent-light);
}
@media(max-width:900px){.nav{display:none}}
main{padding-top:110px}
.hero{display:flex;gap:32px;align-items:flex-start;flex-wrap:wrap;justify-content:space-between}
.hero-left{flex:1;min-width:260px}
.hero-right{width:400px;max-width:45%}
.hero-left h1{font-size:32px;margin-bottom:8px;color:var(--text)}
.lead{color:var(--accent);font-weight:600;margin-bottom:8px;font-size:18px}
.sub{color:var(--muted);margin-bottom:16px}
.hero-actions{display:flex;gap:12px;margin-bottom:12px}

/* ---------- PROFILE CARD ---------- */
.profile-circle{
  width:280px;
  height:280px;
  border-radius:50%;
  border:3px dashed rgba(148,163,184,0.35);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
  font-weight:600;
  background:var(--glass-2);
  margin-left:40px;
}
.profile-circle img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:50%;
}
.profile-circle span{
  font-size:14px;
  text-align:center;
  line-height:1.4;
}

/* ---------- CARDS / GRID / TIMELINE ---------- */
.card{background:var(--card);padding:20px;border-radius:var(--radius);margin-bottom:16px;backdrop-filter:blur(6px);transition:.28s cubic-bezier(.2,.9,.3,1), box-shadow .28s;will-change:transform, box-shadow}
.card:hover{transform:translateY(-10px);box-shadow:0 20px 40px rgba(2,6,23,0.6)}
.title{font-size:26px;color:var(--text);margin-bottom:16px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
.timeline{border-left:2px dashed rgba(255,255,255,0.08);padding-left:22px}
.timeline-item{margin-bottom:20px;position:relative;padding-left:28px}
.timeline-marker{
  width:12px;
  height:12px;
  border-radius:50%;
  background:var(--accent);
  position:absolute;
  left:-6px;
  top:8px;
  box-shadow:0 0 0 6px rgba(96,165,250,0.18);
  z-index:1;
}
.timeline .card h4{margin-bottom:8px;color:var(--text)}
.timeline .card small{display:block;margin-bottom:12px;color:var(--muted);font-weight:600}
.timeline .card p{margin:0;color:var(--muted)}

/* ---------- SKILLS / COUNTERS ---------- */
.meter-row{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.meter{flex:1;background:var(--glass-2);height:14px;border-radius:999px;overflow:hidden}
.meter i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#6ee7b7,#60a5fa);transition:width .9s ease}
.counters{display:flex;gap:20px;justify-content:space-around}
.counter{text-align:center}
.counter .num{font-size:30px;color:var(--text);font-weight:800}

/* ---------- CONTACT / FOOTER ---------- */
.contact-info-card p{margin:6px 0}
.contact-info-card a{color:var(--accent);text-decoration:none}
.contact-info-card a:hover{color:var(--accent-light)}
.footer{text-align:center;margin:32px 0;color:var(--muted)}

/* ---------- REVEAL / RESPONSIVE ---------- */
.reveal{opacity:0;transform:translateY(14px);transition:.6s ease}
@media(max-width:640px){.hero-right{width:100%;max-width:100%}.site-header{padding:8px}.hero{gap:18px}}

/* ---------- ANIMATED GRADIENT BORDER FOR SECTIONS ---------- */
.section{position:relative;padding:26px 0;border-radius:var(--radius);overflow:hidden}
.section::before { display: none; }
/* @keyframes borderAnim{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}} */

/* ---------- SECTION HOVER GLOW (subtle) ---------- */
.section:hover{box-shadow:none;transition:box-shadow .35s ease}
.section .card{
  position:relative;
  overflow:hidden;
  isolation:isolate;
}
.section .card::before{
  content:"";
  position:absolute;
  inset:0;
  padding:1px;
  border-radius:inherit;
  background:linear-gradient(130deg,#60a5fa,#93c5fd,#6ee7b7,#60a5fa);
  opacity:0;
  transition:opacity .35s ease;
  pointer-events:none;
  -webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
}
.section .card:hover::before{
  opacity:1;
}

/* ---------- GLASSMORPHISM TOUCH REACTION ---------- */
.section { overflow: hidden; } /* ensure glow clips */
.section .glow-spot{position:absolute;width:180px;height:180px;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,0.22) 0%, rgba(255,255,255,0.06) 40%, transparent 70%);pointer-events:none;filter:blur(28px);transform:translate(-50%,-50%);opacity:0;transition:opacity .25s ease}
.section.active .glow-spot{opacity:0}

/* ---------- MAGNETIC HOVER (cards & buttons) ---------- */
.magnetic{transition:transform .28s cubic-bezier(.2,.9,.3,1);transform-origin:center}
.magnetic-wrap{display:inline-block;position:relative}

/* ---------- PARALLAX LAYERS ---------- */
.parallax{transition:transform .35s ease-out;will-change:transform}

/* ---------- AURORA BACKGROUND ---------- */
.aurora{position:fixed;inset:0;pointer-events:none;z-index:-1;background:radial-gradient(circle at 20% 60%, rgba(96,165,250,0.35), transparent 60%),radial-gradient(circle at 80% 30%, rgba(147,197,253,0.35), transparent 60%),radial-gradient(circle at 50% 90%, rgba(110,231,183,0.25), transparent 70%);animation:auroraMove 15s ease-in-out infinite alternate;filter:blur(70px)}
@keyframes auroraMove{0%{transform:translate(-40px,-40px)}100%{transform:translate(80px,60px)}}

/* ---------- FLOATING PROJECT CARDS ---------- */
.float-card{animation:float 6s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-10px)}}

/* ---------- CURSOR (dot + ring) ---------- */
.cursor-dot,.cursor-ring{position:fixed;pointer-events:none;border-radius:50%;transition:transform .12s ease,opacity .12s ease;z-index:9999;mix-blend-mode:screen}
.cursor-dot{width:8px;height:8px;background:var(--accent);transform:translate(-50%,-50%) scale(1)}
.cursor-ring{width:38px;height:38px;border:2px solid var(--accent);opacity:0.6;transform:translate(-50%,-50%) scale(1)}

/* when hovering interactive */
.cursor-ring.active{transform:translate(-50%,-50%) scale(1.9);opacity:0.85}
.cursor-dot.hidden,.cursor-ring.hidden{opacity:0;transform:translate(-50%,-50%) scale(0.7)}
.cursor-dot,.cursor-ring{display:none !important;}

/* ---------- STARS CANVAS (dark mode only) ---------- */
.stars{position:fixed;inset:0;z-index:-2;pointer-events:none;display:block;opacity:0.9}

/* performance hint */
@media (prefers-reduced-motion: reduce){
  .float-card, .aurora, .bg-animated, .card, .parallax { animation: none !important; transition: none !important; }
  .cursor-dot, .cursor-ring { transition: none !important; }
}
.section + .section { margin-top: 40px; }
.section > *:not(.glow-spot) + * { margin-top: 24px; }

/* ---------- Restore title contrast and card glow in light mode ---------- */
[data-theme="light"] .title,
[data-theme="light"] .timeline .card h4{
  color: var(--text);
}
[data-theme="light"] .section .card{
  background: rgba(255,255,255,0.9);
}
[data-theme="light"] .section .card::before{
  background: linear-gradient(130deg,#2563eb,#3b82f6,#60a5fa,#2563eb);
}
[data-theme="light"] .section .card:hover{
  box-shadow: 0 18px 36px rgba(37,99,235,0.24);
}
[data-theme="light"] .btn.ghost{
  background:rgba(37,99,235,0.08);
  border-color:rgba(37,99,235,0.45);
  color:var(--accent);
}
[data-theme="light"] .btn.ghost:hover{
  background:rgba(37,99,235,0.16);
  border-color:var(--accent);
  color:var(--accent);
}
</style>
</head>

<body>
<!-- Animated & aurora background layers -->
<div class="bg-animated"></div>
<div class="aurora"></div>
<canvas class="stars"></canvas>

<div class="app" data-theme="dark">
  <header class="site-header">
    <div class="brand">MOSFIQUR</div>
    <nav class="nav">
      <a href="#about">About</a>
      <a href="#research">Research</a>
      <a href="#projects">Projects</a>
      <a href="#experience">Experience</a>
      <a href="#education">Education</a>
      <a href="#skills">Skills</a>
      <a href="#contact">Contact</a>
    </nav>
    <div class="actions">
      <button id="themeToggle" class="icon-btn theme-icon" aria-label="Toggle theme">
        <img src="day-and-night.png" alt="theme icon" />
      </button>
      <a class="btn" href="Mosfiq_IT_CV.pdf" download>Download CV</a>
    </div>
  </header>

  <main>
    <!-- HERO (parallax layer) -->
    <section class="hero section parallax" data-speed="0.06">
      <div class="hero-left">
        <h1 class="reveal">Hi, I'm <span class="accent">MD. MOSFIQUR RAHMAN</span></h1>
        <p class="lead reveal">Frontend Developer · Researcher · Cybersecurity Learner.</p>
        <p class="sub reveal">Focused on ML, secure systems, and real-world impactful solutions.</p>
        <div class="hero-actions reveal">
          <a href="#contact" class="btn magnetic">Contact Me</a>
          <a href="#projects" class="btn ghost magnetic">View Projects</a>
        </div>
      </div>

      <div class="hero-right reveal parallax" data-speed="0.12">
        <div class="profile-circle magnetic">
          <img src="retouch_2025110123305504.jpg" alt="MD. Mosfiqur Rahman" />
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section parallax" data-speed="0.09">
      <h2 class="title reveal">About</h2>
      <div class="card reveal">Enthusiastic learner exploring ML, cybersecurity, reliable IoT systems, and ethical AI.</div>
    </section>

    <!-- RESEARCH -->
    <section id="research" class="section parallax" data-speed="0.14">
      <h2 class="title reveal">Research Interests</h2>
      <div class="card reveal">Interpretable AI · Smart Cities · IoT ML Analytics · Behavioral Data Modeling.</div>
    </section>

    <!-- PROJECTS (floating cards) -->
    <section id="projects" class="section parallax" data-speed="0.08">
      <h2 class="title reveal">Projects</h2>
      <div class="grid">
        <div class="card tilt float-card magnetic reveal"><h3>Biosteller — NASA Space Apps</h3><p>Space-biology engine with ML & NEO visualization.</p></div>
        <div class="card tilt float-card magnetic reveal"><h3>Routine Manager</h3><p>Java Swing routine management system.</p></div>
        <div class="card tilt float-card magnetic reveal"><h3>AQI Monitor</h3><p>Python CLI tool using WAQI API.</p></div>
      </div>
    </section>

    <!-- EXPERIENCE -->
    <section id="experience" class="section parallax" data-speed="0.06">
      <h2 class="title reveal">Experience</h2>
      <div class="timeline">
        <div class="timeline-item reveal"><div class="timeline-marker"></div><div class="card">
          <h4>Online Sales Executive — Unifrenz</h4>
          <small>Apr–May 2025</small>
          <p>Customer engagement &amp; online catalogue management.</p>
        </div></div>
        <div class="timeline-item reveal"><div class="timeline-marker"></div><div class="card">
          <h4>Inbound — Probashi Mart</h4>
          <small>Apr–May 2024</small>
          <p>Order processing and inventory support.</p>
        </div></div>
        <div class="timeline-item reveal"><div class="timeline-marker"></div><div class="card">
          <h4>Packaging Assistant — Probashi Mart</h4>
          <small>May 2024</small>
          <p>Quality check and packaging workflows.</p>
        </div></div>
      </div>
    </section>

    <!-- EDUCATION -->
    <section id="education" class="section parallax" data-speed="0.05">
      <h2 class="title reveal">Education</h2>
      <div class="grid">
        <div class="card reveal"><strong>Dhaka International University</strong><br>BSc in CSE — CGPA 3.00</div>
        <div class="card reveal"><strong>National School & College</strong><br>HSC — GPA 4.33</div>
        <div class="card reveal"><strong>Badda Alatunnessa School</strong><br>SSC — GPA 4.50</div>
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" class="section parallax" data-speed="0.07">
      <h2 class="title reveal">Skills</h2>
      <div class="grid">
        <div class="card reveal"><h4>Languages</h4><p>Python · Java · C/C++ · JavaScript</p></div>
        <div class="card reveal"><h4>Cybersecurity</h4><p>TryHackMe · HTB · Linux · picoCTF</p></div>
        <div class="card reveal counters">
          <div class="counter"><div class="num" data-target="12">0</div><div class="label">Projects</div></div>
          <div class="counter"><div class="num" data-target="3">0</div><div class="label">Research</div></div>
          <div class="counter"><div class="num" data-target="2">0</div><div class="label">Competitions</div></div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section parallax" data-speed="0.1">
      <h2 class="title reveal">Contact</h2>
      <div class="card reveal contact-info-card">
        <p><strong>Email:</strong> <a href="mailto:mosfiqqq@gmail.com">mosfiqqq@gmail.com</a></p>
        <p><strong>Phone:</strong> <a href="tel:+8801726680532">+8801726680532</a></p>
        <p><strong>GitHub:</strong> <a href="https://github.com/Musfiq-003" target="_blank">Musfiq-003</a></p>
        <p><strong>LinkedIn:</strong> <a href="https://linkedin.com/in/meetmosfiq" target="_blank">meetmosfiq</a></p>
      </div>
    </section>


  </main>

  <footer class="footer">© <span id="year"></span> MD. Mosfiqur Rahman</footer>
</div>

<!-- Cursor elements -->
<div class="cursor-ring" aria-hidden="true"></div>
<div class="cursor-dot" aria-hidden="true"></div>

<script>
/* ------------------ Basic helpers & initial UI ------------------ */
// set year
document.getElementById("year").textContent = new Date().getFullYear();

// theme toggle (keeps your original behavior)
const app = document.querySelector(".app");
const root = document.documentElement;
const toggle = document.getElementById("themeToggle");
const saved = localStorage.getItem("theme") || "dark";
app.setAttribute("data-theme", saved);
root.setAttribute("data-theme", saved);
toggle.onclick = () => {
  const next = app.getAttribute("data-theme") === "dark" ? "light" : "dark";
  app.setAttribute("data-theme", next);
  root.setAttribute("data-theme", next);
  localStorage.setItem("theme", next);
  // redraw stars visibility
  updateStarsVisibility();
};

/* ------------------ Reveal animation (IntersectionObserver) ------------------ */
const reveals = document.querySelectorAll(".reveal");
const obs = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.style.opacity = 1;
      e.target.style.transform = "none";
      obs.unobserve(e.target);
    }
  });
},{threshold:0.2});
reveals.forEach(r => obs.observe(r));

/* ------------------ Skill meters ------------------ */
setTimeout(() => {
  document.querySelectorAll(".meter i").forEach(i => {
    i.style.width = i.dataset.val + "%";
  });
}, 300);

/* ------------------ Counters ------------------ */
const nums = document.querySelectorAll(".num");
const obs2 = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if(e.isIntersecting){
      const target = +e.target.dataset.target;
      let c=0;
      const int=setInterval(()=>{
        c++; e.target.textContent=c;
        if(c>=target) clearInterval(int);
      },20);
      obs2.unobserve(e.target);
    }
  });
},{threshold:0.3});
nums.forEach(n => obs2.observe(n));

/* ------------------ 3D Tilt (kept) ------------------ */
document.querySelectorAll(".tilt").forEach(card => {
  card.addEventListener("pointermove", e => {
    const r = card.getBoundingClientRect();
    const x = (e.clientX - r.left) / r.width;
    const y = (e.clientY - r.top) / r.height;
    card.style.transform = `rotateX(${(y - 0.5) * 10}deg) rotateY(${(x - 0.5) * -10}deg)`;
  });
  card.addEventListener("pointerleave", () => card.style.transform="");
});

/* ------------------ Glassmorphism Touch Reaction (glow spot) ------------------ */
document.querySelectorAll(".section").forEach(section => {
  // append glow spot
  const glow = document.createElement("div");
  glow.className = "glow-spot";
  section.appendChild(glow);

  function moveGlow(e) {
    const rect = section.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    glow.style.left = x + "px";
    glow.style.top = y + "px";
  }

  section.addEventListener("mousemove", e => {
    section.classList.add("active");
    moveGlow(e);
  });
  section.addEventListener("mouseleave", () => section.classList.remove("active"));

  section.addEventListener("touchstart", e => {
    section.classList.add("active");
    moveGlow(e);
  }, {passive:true});
  section.addEventListener("touchmove", e => moveGlow(e), {passive:true});
  section.addEventListener("touchend", () => section.classList.remove("active"));
});

/* ------------------ Magnetic Hover Pull (pure JS) ------------------ */
document.querySelectorAll(".magnetic").forEach(el => {
  const strength = 20; // lower = stronger pull
  el.addEventListener("mousemove", e => {
    const rect = el.getBoundingClientRect();
    const x = e.clientX - (rect.left + rect.width / 2);
    const y = e.clientY - (rect.top + rect.height / 2);
    el.style.transform = `translate(${x / strength}px, ${y / strength}px)`;
  });
  el.addEventListener("mouseleave", () => {
    el.style.transform = `translate(0px,0px)`;
  });
});

/* ------------------ Parallax Depth (scroll) - pure JS ------------------ */
function parallaxScroll() {
  const y = window.scrollY;
  document.querySelectorAll(".parallax").forEach(layer => {
    const speed = parseFloat(layer.dataset.speed) || 0.12;
    layer.style.transform = `translateY(${y * speed}px)`;
  });
}
window.addEventListener("scroll", parallaxScroll, {passive:true});
parallaxScroll();

/* ------------------ Interactive Cursor (pure JS) ------------------ */
const dot = document.querySelector(".cursor-dot");
const ring = document.querySelector(".cursor-ring");
let mouseVisible = true;
function moveCursor(x,y){
  dot.style.left = ring.style.left = x + "px";
  dot.style.top = ring.style.top = y + "px";
}
window.addEventListener("mousemove", e => {
  moveCursor(e.clientX, e.clientY);
  dot.classList.remove("hidden");
  ring.classList.remove("hidden");
  mouseVisible = true;
});
window.addEventListener("mouseleave", ()=> {
  dot.classList.add("hidden");
  ring.classList.add("hidden");
  mouseVisible = false;
});
// interactable hover state
document.querySelectorAll("a, button, .card").forEach(el => {
  el.addEventListener("mouseenter", () => ring.classList.add("active"));
  el.addEventListener("mouseleave", () => ring.classList.remove("active"));
});

/* ------------------ Floating project cards (pure CSS already) ------------------ */

/* ------------------ Night Sky Stars (canvas) ------------------ */
const starsCanvas = document.querySelector(".stars");
const sctx = starsCanvas.getContext && starsCanvas.getContext("2d");
let stars = [];
function resizeStars(){
  if(!sctx) return;
  starsCanvas.width = window.innerWidth;
  starsCanvas.height = window.innerHeight;
  // regenerate star positions
  stars = [];
  const count = Math.round((starsCanvas.width * starsCanvas.height) / 15000); // density scaling
  for(let i=0;i<count;i++){
    stars.push({
      x: Math.random()*starsCanvas.width,
      y: Math.random()*starsCanvas.height,
      r: Math.random()*1.6,
      a: Math.random()*0.8 + 0.2,
      tw: Math.random()*0.04 + 0.01 // twinkle speed
    });
  }
}
function drawStars(time){
  if(!sctx) return;
  sctx.clearRect(0,0, starsCanvas.width, starsCanvas.height);
  // only draw when dark theme
  if(app.getAttribute("data-theme") !== "dark") return;
  for(let i=0;i<stars.length;i++){
    const st = stars[i];
    const alpha = st.a * (0.7 + Math.sin(time * st.tw + i) * 0.3);
    sctx.fillStyle = `rgba(255,255,255,${alpha})`;
    sctx.fillRect(st.x, st.y, st.r, st.r);
  }
  requestAnimationFrame(drawStars);
}
function updateStarsVisibility(){
  // redraw when theme changes
  if(app.getAttribute("data-theme") === "dark") {
    resizeStars();
    requestAnimationFrame(drawStars);
  } else {
    if(sctx) sctx.clearRect(0,0, starsCanvas.width, starsCanvas.height);
  }
}
window.addEventListener("resize", resizeStars, {passive:true});
resizeStars();
requestAnimationFrame(drawStars);

/* ------------------ Optional: GSAP & Three.js Enhanced Mode ------------------
   If GSAP (and optional Three.js) are loaded from CDN, we will enhance:
   - smoother parallax using gsap on scroll
   - smoother magnetic easing
   - floating / float-card subtle y offsets by gsap
   This block will run only if window.gsap exists.
-------------------------------------------------------------------------- */
function initEnhancedIfAvailable(){
  // check for gsap
  if(window.gsap){
    try{
      // smooth parallax (using gsap.ticker)
      const _parallaxLayers = Array.from(document.querySelectorAll(".parallax"));
      gsap.ticker.add(()=> {
        const y = window.scrollY;
        _parallaxLayers.forEach(layer=>{
          const speed = parseFloat(layer.dataset.speed) || 0.12;
          gsap.to(layer, { duration: 0.9, y: y * speed, ease: "power3.out", overwrite: true });
        });
      });

      // magnetic: use transform with quickSetter for smoothness
      document.querySelectorAll(".magnetic").forEach(el=>{
        const q = gsap.quickSetter(el, "css");
        el.addEventListener("mousemove", e => {
          const rect = el.getBoundingClientRect();
          const x = e.clientX - (rect.left + rect.width/2);
          const y = e.clientY - (rect.top + rect.height/2);
          gsap.to(el, { x: x/18, y: y/18, duration: 0.35, ease: "power3.out" });
        });
        el.addEventListener("mouseleave", ()=> gsap.to(el, { x:0, y:0, duration:0.6, ease:"power3.out" }));
      });

      // float cards: subtle 3D bob using gsap
      document.querySelectorAll(".float-card").forEach((c, i)=>{
        const delay = (i % 3) * 0.12;
        gsap.to(c, { y: -8, repeat: -1, yoyo: true, ease:"sine.inOut", duration: 6 + (i%2), delay });
      });

      // smoother cursor following
      if(window.innerWidth > 640){
        let pos = { x: window.innerWidth/2, y: window.innerHeight/2 };
        gsap.set(".cursor-dot, .cursor-ring", { xPercent: -50, yPercent: -50 });
        window.addEventListener("mousemove", e => { pos.x = e.clientX; pos.y = e.clientY; });
        gsap.ticker.add(()=> {
          gsap.to(".cursor-ring", { x: pos.x, y: pos.y, duration: 0.14, ease: "power3.out" });
          gsap.to(".cursor-dot", { x: pos.x, y: pos.y, duration: 0.06, ease: "power3.out" });
        });
      }

      // optional: if three is present, you could add WebGL aurora — left as advanced hook
      console.log("GSAP enhancements active");
    }catch(err){
      console.warn("GSAP enhancement failed:", err);
    }
  } // end gsap
}
// Try to initialize (CDN below will make gsap available if loaded)
initEnhancedIfAvailable();

/* ------------------ Try to re-init enhancements shortly after load (if libs load later) */
setTimeout(initEnhancedIfAvailable, 1200);

/* ------------------ If you want to call enhanced mode on-demand:
   window.forceEnhance = () => { initEnhancedIfAvailable(); };
-------------------------------------------------------------------------- */
</script>

<!-- Optional CDN: GSAP and Three.js (B) -->
<!-- GSAP (animation) and optional THREE (for advanced aurora / 3D if you want to add later) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" integrity="" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js" integrity="" crossorigin="anonymous"></script>

</body>
</html>
